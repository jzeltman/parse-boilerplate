(function(a){a.Parse=a.Parse||{},a.Parse.VERSION="1.0.0"})(this),function(){function A(a,b,c){if(a===b)return a!==0||1/a==1/b;if(a==null||b==null)return a===b;a._chain&&(a=a._wrapped),b._chain&&(b=b._wrapped);if(a.isEqual&&w.isFunction(a.isEqual))return a.isEqual(b);if(b.isEqual&&w.isFunction(b.isEqual))return b.isEqual(a);var d=i.call(a);if(d!=i.call(b))return!1;switch(d){case"[object String]":return a==String(b);case"[object Number]":return a!=+a?b!=+b:a==0?1/a==1/b:a==+b;case"[object Date]":case"[object Boolean]":return+a==+b;case"[object RegExp]":return a.source==b.source&&a.global==b.global&&a.multiline==b.multiline&&a.ignoreCase==b.ignoreCase}if(typeof a!="object"||typeof b!="object")return!1;var e=c.length;while(e--)if(c[e]==a)return!0;c.push(a);var f=0,g=!0;if(d=="[object Array]"){f=a.length,g=f==b.length;if(g)while(f--)if(!(g=f in a==f in b&&A(a[f],b[f],c)))break}else{if("constructor"in a!="constructor"in b||a.constructor!=b.constructor)return!1;for(var h in a)if(w.has(a,h)){f++;if(!(g=w.has(b,h)&&A(a[h],b[h],c)))break}if(g){for(h in b)if(w.has(b,h)&&!(f--))break;g=!f}}return c.pop(),g}var a=this,b=a._,c={},d=Array.prototype,e=Object.prototype,f=Function.prototype,g=d.slice,h=d.unshift,i=e.toString,j=e.hasOwnProperty,k=d.forEach,l=d.map,m=d.reduce,n=d.reduceRight,o=d.filter,p=d.every,q=d.some,r=d.indexOf,s=d.lastIndexOf,t=Array.isArray,u=Object.keys,v=f.bind,w=function(a){return new E(a)};typeof exports!="undefined"?(typeof module!="undefined"&&module.exports&&(exports=module.exports=w),exports._=w):a._=w,w.VERSION="1.3.1";var x=w.each=w.forEach=function(a,b,d){if(a==null)return;if(k&&a.forEach===k)a.forEach(b,d);else if(a.length===+a.length){for(var e=0,f=a.length;e<f;e++)if(e in a&&b.call(d,a[e],e,a)===c)return}else for(var g in a)if(w.has(a,g)&&b.call(d,a[g],g,a)===c)return};w.map=w.collect=function(a,b,c){var d=[];return a==null?d:l&&a.map===l?a.map(b,c):(x(a,function(a,e,f){d[d.length]=b.call(c,a,e,f)}),a.length===+a.length&&(d.length=a.length),d)},w.reduce=w.foldl=w.inject=function(a,b,c,d){var e=arguments.length>2;a==null&&(a=[]);if(m&&a.reduce===m)return d&&(b=w.bind(b,d)),e?a.reduce(b,c):a.reduce(b);x(a,function(a,f,g){e?c=b.call(d,c,a,f,g):(c=a,e=!0)});if(!e)throw new TypeError("Reduce of empty array with no initial value");return c},w.reduceRight=w.foldr=function(a,b,c,d){var e=arguments.length>2;a==null&&(a=[]);if(n&&a.reduceRight===n)return d&&(b=w.bind(b,d)),e?a.reduceRight(b,c):a.reduceRight(b);var f=w.toArray(a).reverse();return d&&!e&&(b=w.bind(b,d)),e?w.reduce(f,b,c,d):w.reduce(f,b)},w.find=w.detect=function(a,b,c){var d;return y(a,function(a,e,f){if(b.call(c,a,e,f))return d=a,!0}),d},w.filter=w.select=function(a,b,c){var d=[];return a==null?d:o&&a.filter===o?a.filter(b,c):(x(a,function(a,e,f){b.call(c,a,e,f)&&(d[d.length]=a)}),d)},w.reject=function(a,b,c){var d=[];return a==null?d:(x(a,function(a,e,f){b.call(c,a,e,f)||(d[d.length]=a)}),d)},w.every=w.all=function(a,b,d){var e=!0;return a==null?e:p&&a.every===p?a.every(b,d):(x(a,function(a,f,g){if(!(e=e&&b.call(d,a,f,g)))return c}),e)};var y=w.some=w.any=function(a,b,d){b||(b=w.identity);var e=!1;return a==null?e:q&&a.some===q?a.some(b,d):(x(a,function(a,f,g){if(e||(e=b.call(d,a,f,g)))return c}),!!e)};w.include=w.contains=function(a,b){var c=!1;return a==null?c:r&&a.indexOf===r?a.indexOf(b)!=-1:(c=y(a,function(a){return a===b}),c)},w.invoke=function(a,b){var c=g.call(arguments,2);return w.map(a,function(a){return(w.isFunction(b)?b||a:a[b]).apply(a,c)})},w.pluck=function(a,b){return w.map(a,function(a){return a[b]})},w.max=function(a,b,c){if(!b&&w.isArray(a))return Math.max.apply(Math,a);if(!b&&w.isEmpty(a))return-Infinity;var d={computed:-Infinity};return x(a,function(a,e,f){var g=b?b.call(c,a,e,f):a;g>=d.computed&&(d={value:a,computed:g})}),d.value},w.min=function(a,b,c){if(!b&&w.isArray(a))return Math.min.apply(Math,a);if(!b&&w.isEmpty(a))return Infinity;var d={computed:Infinity};return x(a,function(a,e,f){var g=b?b.call(c,a,e,f):a;g<d.computed&&(d={value:a,computed:g})}),d.value},w.shuffle=function(a){var b=[],c;return x(a,function(a,d,e){d==0?b[0]=a:(c=Math.floor(Math.random()*(d+1)),b[d]=b[c],b[c]=a)}),b},w.sortBy=function(a,b,c){return w.pluck(w.map(a,function(a,d,e){return{value:a,criteria:b.call(c,a,d,e)}}).sort(function(a,b){var c=a.criteria,d=b.criteria;return c<d?-1:c>d?1:0}),"value")},w.groupBy=function(a,b){var c={},d=w.isFunction(b)?b:function(a){return a[b]};return x(a,function(a,b){var e=d(a,b);(c[e]||(c[e]=[])).push(a)}),c},w.sortedIndex=function(a,b,c){c||(c=w.identity);var d=0,e=a.length;while(d<e){var f=d+e>>1;c(a[f])<c(b)?d=f+1:e=f}return d},w.toArray=function(a){return a?a.toArray?a.toArray():w.isArray(a)?g.call(a):w.isArguments(a)?g.call(a):w.values(a):[]},w.size=function(a){return w.toArray(a).length},w.first=w.head=function(a,b,c){return b!=null&&!c?g.call(a,0,b):a[0]},w.initial=function(a,b,c){return g.call(a,0,a.length-(b==null||c?1:b))},w.last=function(a,b,c){return b!=null&&!c?g.call(a,Math.max(a.length-b,0)):a[a.length-1]},w.rest=w.tail=function(a,b,c){return g.call(a,b==null||c?1:b)},w.compact=function(a){return w.filter(a,function(a){return!!a})},w.flatten=function(a,b){return w.reduce(a,function(a,c){return w.isArray(c)?a.concat(b?c:w.flatten(c)):(a[a.length]=c,a)},[])},w.without=function(a){return w.difference(a,g.call(arguments,1))},w.uniq=w.unique=function(a,b,c){var d=c?w.map(a,c):a,e=[];return w.reduce(d,function(c,d,f){if(0==f||(b===!0?w.last(c)!=d:!w.include(c,d)))c[c.length]=d,e[e.length]=a[f];return c},[]),e},w.union=function(){return w.uniq(w.flatten(arguments,!0))},w.intersection=w.intersect=function(a){var b=g.call(arguments,1);return w.filter(w.uniq(a),function(a){return w.every(b,function(b){return w.indexOf(b,a)>=0})})},w.difference=function(a){var b=w.flatten(g.call(arguments,1));return w.filter(a,function(a){return!w.include(b,a)})},w.zip=function(){var a=g.call(arguments),b=w.max(w.pluck(a,"length")),c=new Array(b);for(var d=0;d<b;d++)c[d]=w.pluck(a,""+d);return c},w.indexOf=function(a,b,c){if(a==null)return-1;var d,e;if(c)return d=w.sortedIndex(a,b),a[d]===b?d:-1;if(r&&a.indexOf===r)return a.indexOf(b);for(d=0,e=a.length;d<e;d++)if(d in a&&a[d]===b)return d;return-1},w.lastIndexOf=function(a,b){if(a==null)return-1;if(s&&a.lastIndexOf===s)return a.lastIndexOf(b);var c=a.length;while(c--)if(c in a&&a[c]===b)return c;return-1},w.range=function(a,b,c){arguments.length<=1&&(b=a||0,a=0),c=arguments[2]||1;var d=Math.max(Math.ceil((b-a)/c),0),e=0,f=new Array(d);while(e<d)f[e++]=a,a+=c;return f};var z=function(){};w.bind=function(a,b){var c,d;if(a.bind===v&&v)return v.apply(a,g.call(arguments,1));if(!w.isFunction(a))throw new TypeError;return d=g.call(arguments,2),c=function(){if(this instanceof c){z.prototype=a.prototype;var e=new z,f=a.apply(e,d.concat(g.call(arguments)));return Object(f)===f?f:e}return a.apply(b,d.concat(g.call(arguments)))}},w.bindAll=function(a){var b=g.call(arguments,1);return b.length==0&&(b=w.functions(a)),x(b,function(b){a[b]=w.bind(a[b],a)}),a},w.memoize=function(a,b){var c={};return b||(b=w.identity),function(){var d=b.apply(this,arguments);return w.has(c,d)?c[d]:c[d]=a.apply(this,arguments)}},w.delay=function(a,b){var c=g.call(arguments,2);return setTimeout(function(){return a.apply(a,c)},b)},w.defer=function(a){return w.delay.apply(w,[a,1].concat(g.call(arguments,1)))},w.throttle=function(a,b){var c,d,e,f,g,h=w.debounce(function(){g=f=!1},b);return function(){c=this,d=arguments;var i=function(){e=null,g&&a.apply(c,d),h()};e||(e=setTimeout(i,b)),f?g=!0:a.apply(c,d),h(),f=!0}},w.debounce=function(a,b){var c;return function(){var d=this,e=arguments,f=function(){c=null,a.apply(d,e)};clearTimeout(c),c=setTimeout(f,b)}},w.once=function(a){var b=!1,c;return function(){return b?c:(b=!0,c=a.apply(this,arguments))}},w.wrap=function(a,b){return function(){var c=[a].concat(g.call(arguments,0));return b.apply(this,c)}},w.compose=function(){var a=arguments;return function(){var b=arguments;for(var c=a.length-1;c>=0;c--)b=[a[c].apply(this,b)];return b[0]}},w.after=function(a,b){return a<=0?b():function(){if(--a<1)return b.apply(this,arguments)}},w.keys=u||function(a){if(a!==Object(a))throw new TypeError("Invalid object");var b=[];for(var c in a)w.has(a,c)&&(b[b.length]=c);return b},w.values=function(a){return w.map(a,w.identity)},w.functions=w.methods=function(a){var b=[];for(var c in a)w.isFunction(a[c])&&b.push(c);return b.sort()},w.extend=function(a){return x(g.call(arguments,1),function(b){for(var c in b)a[c]=b[c]}),a},w.defaults=function(a){return x(g.call(arguments,1),function(b){for(var c in b)a[c]==null&&(a[c]=b[c])}),a},w.clone=function(a){return w.isObject(a)?w.isArray(a)?a.slice():w.extend({},a):a},w.tap=function(a,b){return b(a),a},w.isEqual=function(a,b){return A(a,b,[])},w.isEmpty=function(a){if(w.isArray(a)||w.isString(a))return a.length===0;for(var b in a)if(w.has(a,b))return!1;return!0},w.isElement=function(a){return!!a&&a.nodeType==1},w.isArray=t||function(a){return i.call(a)=="[object Array]"},w.isObject=function(a){return a===Object(a)},w.isArguments=function(a){return i.call(a)=="[object Arguments]"},w.isArguments(arguments)||(w.isArguments=function(a){return!!a&&!!w.has(a,"callee")}),w.isFunction=function(a){return i.call(a)=="[object Function]"},w.isString=function(a){return i.call(a)=="[object String]"},w.isNumber=function(a){return i.call(a)=="[object Number]"},w.isNaN=function(a){return a!==a},w.isBoolean=function(a){return a===!0||a===!1||i.call(a)=="[object Boolean]"},w.isDate=function(a){return i.call(a)=="[object Date]"},w.isRegExp=function(a){return i.call(a)=="[object RegExp]"},w.isNull=function(a){return a===null},w.isUndefined=function(a){return a===void 0},w.has=function(a,b){return j.call(a,b)},w.noConflict=function(){return a._=b,this},w.identity=function(a){return a},w.times=function(a,b,c){for(var d=0;d<a;d++)b.call(c,d)},w.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")},w.mixin=function(a){x(w.functions(a),function(b){G(b,w[b]=a[b])})};var B=0;w.uniqueId=function(a){var b=B++;return a?a+b:b},w.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var C=/.^/,D=function(a){return a.replace(/\\\\/g,"\\").replace(/\\'/g,"'")};w.template=function(a,b){var c=w.templateSettings,d="var __p=[],print=function(){__p.push.apply(__p,arguments);};with(obj||{}){__p.push('"+a.replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(c.escape||C,function(a,b){return"',_.escape("+D(b)+"),'"}).replace(c.interpolate||C,function(a,b){return"',"+D(b)+",'"}).replace(c.evaluate||C,function(a,b){return"');"+D(b).replace(/[\r\n\t]/g," ")+";__p.push('"}).replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/\t/g,"\\t")+"');}return __p.join('');",e=new Function("obj","_",d);return b?e(b,w):function(a){return e.call(this,a,w)}},w.chain=function(a){return w(a).chain()};var E=function(a){this._wrapped=a};w.prototype=E.prototype;var F=function(a,b){return b?w(a).chain():a},G=function(a,b){E.prototype[a]=function(){var a=g.call(arguments);return h.call(a,this._wrapped),F(b.apply(w,a),this._chain)}};w.mixin(w),x(["pop","push","reverse","shift","sort","splice","unshift"],function(a){var b=d[a];E.prototype[a]=function(){var c=this._wrapped;b.apply(c,arguments);var d=c.length;return(a=="shift"||a=="splice")&&d===0&&delete c[0],F(c,this._chain)}}),x(["concat","join","slice"],function(a){var b=d[a];E.prototype[a]=function(){return F(b.apply(this._wrapped,arguments),this._chain)}}),E.prototype.chain=function(){return this._chain=!0,this},E.prototype.value=function(){return this._wrapped}}.call(this),function(a){a.Parse=a.Parse||{};var b=a.Parse;b._=_.noConflict(),typeof $!="undefined"&&(b.$=$);var c=function(){},d=function(a,d,e){var f;return d&&d.hasOwnProperty("constructor")?f=d.constructor:f=function(){a.apply(this,arguments)},b._.extend(f,a),c.prototype=a.prototype,f.prototype=new c,d&&b._.extend(f.prototype,d),e&&b._.extend(f,e),f.prototype.constructor=f,f.__super__=a.prototype,f};b.serverURL="https://api.parse.com",b.initialize=function(a,c){b.applicationId=a,b.javaScriptKey=c},b._getParsePath=function(a){if(!b.applicationId)throw"You need to call Parse.initialize before using Parse.";a||(a="");if(!b._.isString(a))throw"Tried to get a localStorage path that wasn't a String.";return a[0]==="/"&&(a=a.substring(1)),"Parse/"+b.applicationId+"/"+a},b._installationId=null,b._getInstallationId=function(){if(b._installationId)return b._installationId;var a=b._getParsePath("installationId");b._installationId=localStorage.getItem(a);if(!b._installationId||b._installationId===""){var c=function(){return Math.floor((1+Math.random())*65536).toString(16).substring(1)};b._installationId=c()+c()+"-"+c()+"-"+c()+"-"+c()+"-"+c()+c()+c(),localStorage.setItem(a,b._installationId)}return b._installationId},b._parseDate=function(a){var b=new RegExp("^([0-9]{1,4})-([0-9]{1,2})-([0-9]{1,2})T([0-9]{1,2}):([0-9]{1,2}):([0-9]{1,2})(.([0-9]+))?Z$"),c=b.exec(a);if(!c)return null;var d=c[1]||0,e=(c[2]||1)-1,f=c[3]||0,g=c[4]||0,h=c[5]||0,i=c[6]||0,j=c[8]||0;return new Date(Date.UTC(d,e,f,g,h,i,j))},b._ajaxIE8=function(a,b,c,d,e){var f=new XDomainRequest;f.onload=function(){var a;try{a=JSON.parse(f.responseText)}catch(b){e&&e(f)}a&&d&&d(a,f)},f.onerror=f.ontimeout=function(){e(f)},f.onprogress=function(){},f.open(a,b),f.send(c)},b._ajax=function(a,c,d,e,f){if(typeof XDomainRequest!="undefined")return b._ajaxIE8(a,c,d,e,f);var g=new XMLHttpRequest;g.onreadystatechange=function(){if(g.readyState===4)if(g.status>=200&&g.status<300){var a;try{a=JSON.parse(g.responseText)}catch(b){f&&f(g)}a&&e&&e(a,g)}else f&&f(g)},g.open(a,c,!0),g.setRequestHeader("Content-Type","text/plain"),g.send(d)},b._extend=function(a,b){var c=d(this,a,b);return c.extend=this.extend,c},b._request=function(a,c,d,e,f,g){if(!b.applicationId||!b.javaScriptKey)throw"You must specify your applicationId and javaScriptKey using Parse.initialize";if(a!=="classes"&&a!=="users"&&a!=="login"&&a!=="requestPasswordReset")throw"First argument must be one of classes, users, or login, not '"+a+"'.";var h=b.serverURL+"/1/"+a;c&&(h+="/"+c),d&&(h+="/"+d),f=b._.clone(f||{}),e!=="POST"&&(f._method=e,e="POST"),f._ApplicationId=b.applicationId,f._JavaScriptKey=b.javaScriptKey,f._ClientVersion="js"+b.VERSION,f._InstallationId=b._getInstallationId();var i=b.User.current();i&&i._sessionToken&&(f._SessionToken=i._sessionToken);var j=JSON.stringify(f);b._ajax(e,h,j,g.success,g.error)},b._getValue=function(a,c){return!a||!a[c]?null:b._.isFunction(a[c])?a[c]():a[c]},b._encode=function(a){var c=b._;return a instanceof b.Object?a._toPointer():a instanceof b.ACL?a.toJSON():a instanceof Date?{__type:"Date",iso:a.toJSON()}:c.isArray(a)?c.map(a,b._encode):c.isRegExp(a)?a.source:a instanceof b.Relation?a.toJSON():a},b._decode=function(a,c){var d=b._;if(!d.isObject(c))return c;if(d.isArray(c))return d.each(c,function(a,d){c[d]=b._decode(d,a)}),c;if(c instanceof b.Object)return c;if(c.objectId)return c.__type==="Pointer"?b.Object._create(c.className,{objectId:c.objectId}):(d.each(c,function(a,d){c[d]=b._decode(d,a)}),b.Object._create(c.className,c));if(c.__type==="Date")return b._parseDate(c.iso);if(c.__type==="GeoPoint")return new b.GeoPoint({latitude:c.latitude,longitude:c.longitude});if(a==="ACL")return c instanceof b.ACL?c:new b.ACL(c);if(c.__type==="Relation"){var e=new b.Relation(this,a);return e.className=c.className,e}return c}}(this),function(a){a.Parse=a.Parse||{};var b=a.Parse,c=b._;b.Relation=function(a,b){this.parent=a,this.key=b,this.targetClassName=null,this.relationsToAdd=[],this.relationsToRemove=[]},b.Relation.prototype={add:function(a){c.isArray(a)||(a=[a]),this.targetClassName||(this.targetClassName=a[0].className);var b=this;c.each(a,function(a){if(b.targetClassName!==a.className)throw"This relation is on objects of class:"+b.targetClassName+" but got object of class:"+a.className}),a=c.map(a,function(a){return a.id}),this.relationsToAdd=c.union(this.relationsToAdd,a),this.relationsToRemove=c.difference(this.relationsToRemove,a)},remove:function(a){c.isArray(a)||(a=[a]),this.targetClassName||(this.targetClassName=a[0].className);var b=this;c.each(a,function(a){if(b.targetClassName!==a.className)throw"This relation is on objects of class:"+b.targetClassName+" but got object of class:"+a.className}),a=c.map(a,function(a){return a.id}),this.relationsToRemove=c.union(this.relationsToRemove,a),this.relationsToAdd=c.difference(this.relationsToAdd,a)},_dirty:function(){return this.relationsToAdd.length>0||this.relationsToRemove.length>0},toJSON:function(){var a=null,b=null,d=this,e=function(a){return{__type:"Pointer",className:d.targetClassName,objectId:a}},f=null;return this.relationsToAdd.length>0&&(f=c.map(this.relationsToAdd,e),a={__op:"AddRelation",objects:f}),this.relationsToRemove.length>0&&(f=c.map(this.relationsToRemove,e),b={__op:"RemoveRelation",objects:f}),a&&b?{__op:"Batch",ops:[a,b]}:a||b||{__type:"Relation",className:this.targetClassName}},query:function(){var a=b.Object._getSubclass(this.targetClassName),c=new b.Query(a);return c._addCondition("$relatedTo","object",this.parent._toPointer()),c._addCondition("$relatedTo","key",this.key),c},_clearUpdates:function(){this.relationsToRemove=[],this.relationsToAdd=[]}}}(this),function(a){a.Parse=a.Parse||{};var b=a.Parse,c=b._;b.Error=function(a,b){this.code=a,this.message=b},c.extend(b.Error,{OTHER_CAUSE:-1,INTERNAL_SERVER_ERROR:1,CONNECTION_FAILED:100,OBJECT_NOT_FOUND:101,INVALID_QUERY:102,INVALID_CLASS_NAME:103,MISSING_OBJECT_ID:104,INVALID_KEY_NAME:105,INVALID_POINTER:106,INVALID_JSON:107,COMMAND_UNAVAILABLE:108,NOT_INITIALIZED:109,INCORRECT_TYPE:111,INVALID_CHANNEL_NAME:112,PUSH_MISCONFIGURED:115,OBJECT_TOO_LARGE:116,OPERATION_FORBIDDEN:119,CACHE_MISS:120,INVALID_NESTED_KEY:121,INVALID_FILE_NAME:122,INVALID_ACL:123,TIMEOUT:124,INVALID_EMAIL_ADDRESS:125,USERNAME_MISSING:200,PASSWORD_MISSING:201,USERNAME_TAKEN:202,EMAIL_TAKEN:203,EMAIL_MISSING:204,EMAIL_NOT_FOUND:205,SESSION_MISSING:206,MUST_CREATE_USER_THROUGH_SIGNUP:207,ACCOUNT_ALREADY_LINKED:208,LINKED_ID_MISSING:250,INVALID_LINKED_SESSION:251,UNSUPPORTED_SERVICE:252})}(this),function(){var a=this,b=a.Parse||(a.Parse={}),c=/\s+/,d=Array.prototype.slice;b.Events={on:function(a,b,d){var e,f,g,h,i;if(!b)return this;a=a.split(c),e=this._callbacks||(this._callbacks={}),f=a.shift();while(f)i=e[f],g=i?i.tail:{},g.next=h={},g.context=d,g.callback=b,e[f]={tail:h,next:i?i.next:g},f=a.shift();return this},off:function(a,b,d){var e,f,g,h,i,j;if(!(f=this._callbacks))return;if(!(a||b||d))return delete this._callbacks,this;a=a?a.split(c):_.keys(f),e=a.shift();while(e){g=f[e],delete f[e];if(!g||!b&&!d)continue;h=g.tail,g=g.next;while(g!==h)i=g.callback,j=g.context,(b&&i!==b||d&&j!==d)&&this.on(e,i,j),g=g.next;e=a.shift()}return this},trigger:function(a){var b,e,f,g,h,i,j;if(!(f=this._callbacks))return this;i=f.all,a=a.split(c),j=d.call(arguments,1),b=a.shift();while(b){e=f[b];if(e){g=e.tail;while((e=e.next)!==g)e.callback.apply(e.context||this,j)}e=i;if(e){g=e.tail,h=[b].concat(j);while((e=e.next)!==g)e.callback.apply(e.context||this,h)}b=a.shift()}return this}},b.Events.bind=b.Events.on,b.Events.unbind=b.Events.off}.call(this),function(a){a.Parse=a.Parse||{};var b=a.Parse,c=b._;b.GeoPoint=function(a,d){c.isArray(a)?(b.GeoPoint._validate(a[0],a[1]),this.latitude=a[0],this.longitude=a[1]):c.isObject(a)?(b.GeoPoint._validate(a.latitude,a.longitude),this.latitude=a.latitude,this.longitude=a.longitude):c.isNumber(a)&&c.isNumber(d)?(b.GeoPoint._validate(a,d),this.latitude=a,this.longitude=d):(this.latitude=0,this.longitude=0);var e=this;this.__defineGetter__&&this.__defineSetter__&&(this._latitude=this.latitude,this._longitude=this.longitude,this.__defineGetter__("latitude",function(){return e._latitude}),this.__defineGetter__("longitude",function(){return e._longitude}),this.__defineSetter__("latitude",function(a){b.GeoPoint._validate(a,e.longitude),e._latitude=a}),this.__defineSetter__("longitude",function(a){b.GeoPoint._validate(e.latitude,a),e._longitude=a}))},b.GeoPoint._validate=function(a,b){if(a<-90)throw"Parse.GeoPoint latitude "+a+" < -90.0.";if(a>90)throw"Parse.GeoPoint latitude "+a+" > 90.0.";if(b<-180)throw"Parse.GeoPoint longitude "+b+" < -180.0.";if(b>180)throw"Parse.GeoPoint longitude "+b+" > 180.0."},b.GeoPoint.current=function(a){var c=function(c){a.success&&a.success(new b.GeoPoint({latitude:c.coords.latitude,longitude:c.coords.longitude}))},d=function(b){a.error&&a.error(b)};navigator.geolocation.getCurrentPosition(c,d)},b.GeoPoint.prototype={toJSON:function(){return b.GeoPoint._validate(this.latitude,this.longitude),{__type:"GeoPoint",latitude:this.latitude,longitude:this.longitude}},radiansTo:function(a){var b=Math.PI/180,c=this.latitude*b,d=this.longitude*b,e=a.latitude*b,f=a.longitude*b,g=c-e,h=d-f,i=Math.sin(g/2),j=Math.sin(h/2),k=i*i+Math.cos(c)*Math.cos(e)*j*j;return k=Math.min(1,k),2*Math.asin(Math.sqrt(k))},kilometersTo:function(a){return this.radiansTo(a)*6371},milesTo:function(a){return this.radiansTo(a)*3958.8}}}(this),function(a){a.Parse=a.Parse||{};var b=a.Parse,c=b._,d="*";b.ACL=function(a){var d=this;d.permissionsById={};if(c.isObject(a))if(a instanceof b.User)d.setReadAccess(a,!0),d.setWriteAccess(a,!0);else{if(c.isFunction(a))throw"Parse.ACL() called with a function.  Did you forget ()?";c.each(a,function(a,b){if(!c.isString(b))throw"Tried to create an ACL with an invalid userId.";d.permissionsById[b]={},c.each(a,function(a,e){if(e!=="read"&&e!=="write")throw"Tried to create an ACL with an invalid permission type.";if(!c.isBoolean(a))throw"Tried to create an ACL with an invalid permission value.";d.permissionsById[b][e]=a})})}},b.ACL.prototype.toJSON=function(){return c.clone(this.permissionsById)},b.ACL.prototype._setAccess=function(a,d,e){d instanceof b.User?d=d.id:d instanceof b.Role&&(d="role:"+d.getName());if(!c.isString(d))throw"userId must be a string.";if(!c.isBoolean(e))throw"allowed must be either true or false.";var f=this.permissionsById[d];if(!f){if(!e)return;f={},this.permissionsById[d]=f}e?this.permissionsById[d][a]=!0:(delete f[a],c.isEmpty(f)&&delete f[d])},b.ACL.prototype._getAccess=function(a,c){c instanceof b.User?c=c.id:c instanceof b.Role&&(c="role:"+c.getName());var d=this.permissionsById[c];return d?d[a]?!0:!1:!1},b.ACL.prototype.setReadAccess=function(a,b){this._setAccess("read",a,b)},b.ACL.prototype.getReadAccess=function(a){return this._getAccess("read",a)},b.ACL.prototype.setWriteAccess=function(a,b){this._setAccess("write",a,b)},b.ACL.prototype.getWriteAccess=function(a){return this._getAccess("write",a)},b.ACL.prototype.setPublicReadAccess=function(a){this.setReadAccess(d,a)},b.ACL.prototype.getPublicReadAccess=function(){return this.getReadAccess(d)},b.ACL.prototype.setPublicWriteAccess=function(a){this.setWriteAccess(d,a)},b.ACL.prototype.getPublicWriteAccess=function(){return this.getWriteAccess(d)},b.ACL.prototype.getRoleReadAccess=function(a){a instanceof b.Role&&(a=a.getName());if(c.isString(a))return this.getReadAccess("role:"+a);throw"role must be a Parse.Role or a String"},b.ACL.prototype.getRoleWriteAccess=function(a){a instanceof b.Role&&(a=a.getName());if(c.isString(a))return this.getWriteAccess("role:"+a);throw"role must be a Parse.Role or a String"},b.ACL.prototype.setRoleReadAccess=function(a,d){a instanceof b.Role&&(a=a.getName());if(c.isString(a)){this.setReadAccess("role:"+a,d);return}throw"role must be a Parse.Role or a String"},b.ACL.prototype.setRoleWriteAccess=function(a,d){a instanceof b.Role&&(a=a.getName());if(c.isString(a)){this.setWriteAccess("role:"+a,d);return}throw"role must be a Parse.Role or a String"}}(this),function(a){a.Parse=a.Parse||{};var b=a.Parse,c=b._,d=function(a){return c.isNull(a)||c.isUndefined(a)};b.Object=function(a,d){if(c.isString(a))return b.Object._create.apply(this,arguments);a=a||{},d&&d.parse&&(a=this.parse(a));var e=b._getValue(this,"defaults");e&&(a=c.extend({},e,a)),d&&d.collection&&(this.collection=d.collection),this.attributes={},this._dirty={},this._hashedJSON={},this._escapedAttributes={},this.cid=c.uniqueId("c");if(!this.set(a,{silent:!0}))throw new Error("Can't create an invalid Parse.Object");delete this._changed,this._previousAttributes=c.clone(this.attributes),this.initialize.apply(this,arguments)};var e=function(a,b,d,f){d=d||[];var g;if(c.isFunction(f)){var h=f;g={success:function(a){h(a,null)},error:function(a){h(null,a)}}}else g=f;if(a.length){var i=g,j=g?c.clone(g):{};j.success=function(c,f){d.push(c),e(a.slice(1),b,d,i)},b.call(this,a[0],j)}else g.success&&g.success(d)};b.Object.saveAll=function(a,b){e(a,function(a,b){a.save(null,b)},[],b)},b.Object._signUpAll=function(a,b){e(a,function(a,b){a.signUp(null,b)},[],b)},c.extend(b.Object.prototype,b.Events,{initialize:function(){},toJSON:function(){var a=c.clone(this.attributes);return c.each(["createdAt","objectId","updatedAt"],function(b){delete a[b]}),c.each(a,function(c,d){a[d]=b._encode(c)}),a},_refreshCache:function(){var a=this;c.each(this.attributes,function(d,e){if(d instanceof b.Object)d._refreshCache();else if(c.isObject(d)){d.toJSON&&(d=d.toJSON());var f=JSON.stringify(d);a._hashedJSON[e]!==f&&(a._hashedJSON[e]=f,a._dirty[e]=!0)}}),c.each(["createdAt","objectId","updatedAt"],function(b){delete a._dirty[b]})},dirty:function(){return this._refreshCache(),this.id?c.keys(this._dirty).length>0?!0:!1:!0},_toPointer:function(){if(!this.id)throw new Error("Can't serialize an unsaved Parse.Object");return{__type:"Pointer",className:this.className,objectId:this.id}},get:function(a){return this.attributes[a]},relation:function(a){var c=this.get(a);if(c){if(c instanceof b.Relation)return c;throw a+" does contain have a relation"}var d=new b.Relation(this,a);return this.set(a,d),d},escape:function(a){var b=this._escapedAttributes[a];if(b)return b;var e=this.attributes[a],f;return d(e)?f="":f=c.escape(e.toString()),this._escapedAttributes[a]=f,f},has:function(a){return!d(this.attributes[a])},_mergeMagicFields:function(a){var b=this;c.each(["id","objectId","createdAt","updatedAt"],function(c){a[c]&&(c==="objectId"?b.id=a[c]:b[c]=a[c],delete a[c])})},set:function(a,e,f){var g,h;c.isObject(a)||d(a)?(g=a,c.each(g,function(a,c){g[c]=b._decode(c,a)}),f=e):(g={},g[a]=b._decode(a,e)),f=f||{};if(!g)return this;g instanceof b.Object&&(g=g.attributes),f.unset&&c.each(g,function(a,b){g[b]=undefined});if(!this._validate(g,f))return!1;this._mergeMagicFields(g);var i=this.attributes,j=this._escapedAttributes,k=this._previousAttributes||{},l=this._setting;this._changed=this._changed||{},this._setting=!0;var m=this;return c.each(g,function(a,b){c.isEqual(i[b],a)||delete j[b],f.unset?(delete i[b],m._dirty[b]=!0):(i[b]=a,m._dirty[b]=!0),m._changing&&!c.isEqual(m._changed[b],a)&&(m.trigger("change:"+b,m,a,f),m._moreChanges=!0),delete m._changed[b];if(!c.isEqual(k[b],a)||c.has(i,b)!==c.has(k,b))m._changed[b]=a}),l||(!f.silent&&this.hasChanged()&&this.change(f),this._setting=!1),this},unset:function(a,b){return b=b||{},b.unset=!0,this.set(a,null,b)},clear:function(a){return a=a||{},a.unset=!0,this.set(c.clone(this.attributes),a)},fetch:function(a){a=a?c.clone(a):{};var d=this,e=a.success;a.success=function(b,c,f){if(!d.set(d.parse(b,f),a))return!1;e&&(d._refreshCache(),d._dirty={},e(d,b))},a.error=b.Object._wrapError(a.error,d,a),b._request("classes",d.className,d.id,"GET",null,a)},save:function(a,e,f){var g,h,i,j,k;c.isObject(a)||d(a)?(h=a,j=e):(h={},h[a]=e,j=f);if(!j&&h){var l=c.reject(h,function(a,b){return c.include(["success","error","wait"],b)});if(l.length===0){var m=!0;c.has(h,"success")&&!c.isFunction(h.success)&&(m=!1),c.has(h,"error")&&!c.isFunction(h.error)&&(m=!1);if(m)return this.save(null,h)}}j=j?c.clone(j):{},j.wait&&(i=c.clone(this.attributes));var n=c.extend({},j,{silent:!0});if(h&&!this.set(h,j.wait?n:j))return!1;var o=j,p=c.clone(j),q=this,r=function(a,b){q.save(null,o)};q._refreshCache();var s=c.keys(q.attributes);for(g=0;g<s.length;++g){var t=s[g],u=q.attributes[t];if(u instanceof b.Object){if(u.dirty())return p.success=r,u.save(null,p),this}else u instanceof b.Relation&&u._dirty()&&(q._dirty[t]=!0)}var v=c.clone(q.attributes);p.success=function(a,d,e){var f=q.parse(a,e);p.wait&&(f=c.extend(h||{},f));if(!q.set(f,p))return!1;var g=c.keys(q.attributes);c.each(q.attributes,function(a,c){a instanceof b.Relation&&a._clearUpdates()}),o.success?(q._refreshCache(),c.each(v,function(a,b){if(a===q.get(b)){var c=q._dirty;delete c[b]}}),o.success(q,a)):q.trigger("sync",q,a,p)},p.error=b.Object._wrapError(o.error,q,p);var w=this.id?"PUT":"POST",x=this.toJSON();q._refreshCache(),c.each(x,function(a,b){q._dirty[b]||delete x[b]});var y="classes",z=this.className;return this.className==="_User"&&!this.id&&(y="users",z=null),b._request(y,z,this.id,w,x,p),p.wait&&this.set(i,n),this},destroy:function(a){a=a?c.clone(a):{};var d=this,e=a.success,f=function(){d.trigger("destroy",d,d.collection,a)};if(!this.id)return f();a.success=function(b){a.wait&&f(),e?e(d,b):d.trigger("sync",d,b,a)},a.error=b.Object._wrapError(a.error,d,a),b._request("classes",this.className,this.id,"DELETE",null,a),a.wait||f()},parse:function(a,d){var e=c.clone(a);return c(["createdAt","updatedAt"]).each(function(a){e[a]&&(e[a]=b._parseDate(e[a]))}),e.updatedAt||(e.updatedAt=e.createdAt),e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.id},change:function(a){var b=this;if(this._changing||!this.hasChanged())return this;this._changing=!0,this._moreChanges=!0,c.each(this._changed,function(c,d){b.trigger("change:"+d,b,c,a)});while(this._moreChanges)this._moreChanges=!1,this.trigger("change",this,a);return this._previousAttributes=c.clone(this.attributes),delete this._changed,this._changing=!1,this},hasChanged:function(a){return arguments.length?this._changed&&c.has(this._changed,a):!c.isEmpty(this._changed)},changedAttributes:function(a){if(!a)return this.hasChanged()?c.clone(this._changed):!1;var b={},d=this._previousAttributes;return c.each(a,function(a,e){c.isEqual(d[e],a)||(b[e]=a)}),b},previous:function(a){return!arguments.length||!this._previousAttributes?null:this._previousAttributes[a]},previousAttributes:function(){return c.clone(this._previousAttributes)},isValid:function(){return!this.validate(this.attributes)},validate:function(a,d){return!c.has(a,"ACL")||a.ACL instanceof b.ACL?!1:new b.Error(b.Error.OTHER_CAUSE,"ACL must be a Parse.ACL.")},_validate:function(a,b){if(b.silent||!this.validate)return!0;a=c.extend({},this.attributes,a);var d=this.validate(a,b);return d?(b&&b.error?b.error(this,d,b):this.trigger("error",this,d,b),!1):!0},getACL:function(){return this.get("ACL")},setACL:function(a,b){return this.set("ACL",a,b)}}),b.Object._getSubclass=function(a){if(!c.isString(a))throw"Parse.Object._getSubclass requires a string argument.";var d=b.Object._classMap[a];return d||(d=b.Object.extend(a),b.Object._classMap[a]=d),d},b.Object._create=function(a,c,d){var e=b.Object._getSubclass(a);return new e(c,d)},b.Object._classMap={},b.Object._extend=b._extend,b.Object.extend=function(a,d,e){if(!c.isString(a)){if(a&&c.has(a,"className"))return b.Object.extend(a.className,a,d);throw new Error("Parse.Object.extend's first argument should be the className.")}var f=null;if(c.has(b.Object._classMap,a)){var g=b.Object._classMap[a];f=g._extend(d,e)}else d=d||{},d.className=a,f=b.Object._extend(d,e);return f.extend=function(d){if(c.isString(d)||d&&c.has(d,"className"))return b.Object.extend.apply(f,arguments);var e=[a].concat(b._.toArray(arguments));return b.Object.extend.apply(f,e)},b.Object._classMap[a]=f,f},b.Object._wrapError=function(a,c,d){return function(e,f){e!==c&&(f=e);var g=new b.Error(-1,f.responseText);if(f.responseText){var h=JSON.parse(f.responseText);h&&(g=new b.Error(h.code,h.error))}a?a(c,g,d):c.trigger("error",c,g,d)}}}(this),function(a){a.Parse=a.Parse||{};var b=a.Parse,c=b._;b.Role=b.Object.extend("_Role",{constructor:function(a,d){c.isString(a)&&d instanceof b.ACL?(b.Object.prototype.constructor.call(this,null,null),this.setName(a),this.setACL(d)):b.Object.prototype.constructor.call(this,a,d)},getName:function(){return this.get("name")},setName:function(a,b){return this.set("name",a,b)},getUsers:function(){return this.relation("users")},getRoles:function(){return this.relation("roles")},validate:function(a,d){if("name"in a&&a.name!==this.getName()){var e=a.name;if(this.id&&this.id!==a.objectId)return new b.Error(b.Error.OTHER_CAUSE,"A role's name can only be set before it has been saved.");if(!c.isString(e))return new b.Error(b.Error.OTHER_CAUSE,"A role's name must be a String.");if(!/^[a-zA-Z\-_ ]+$/.test(e))return new b.Error(b.Error.OTHER_CAUSE,"A role's name can only contain alphanumeric characters, _, -, and spaces.")}return b.Object.prototype.validate?b.Object.prototype.validate.call(this,a,d):!1}})}(this),function(a){a.Parse=a.Parse||{};var b=a.Parse,c=b._,d=function(a){return c.isNull(a)||c.isUndefined(a)};b.Collection=function(a,b){b=b||{},b.comparator&&(this.comparator=b.comparator),b.model&&(this.model=b.model),b.query&&(this.query=b.query),this._reset(),this.initialize.apply(this,arguments),a&&this.reset(a,{silent:!0,parse:b.parse})},c.extend(b.Collection.prototype,b.Events,{model:b.Object,initialize:function(){},toJSON:function(){return this.map(function(a){return a.toJSON()})},add:function(a,b){var e,f,g,h,i,j,k={},l={};b=b||{},a=c.isArray(a)?a.slice():[a];for(e=0,g=a.length;e<g;e++){a[e]=this._prepareModel(a[e],b),h=a[e];if(!h)throw new Error("Can't add an invalid model to a collection");i=h.cid;if(k[i]||this._byCid[i])throw new Error("Duplicate cid: can't add the same model to a collection twice");j=h.id;if(!d(j)&&(l[j]||this._byId[j]))throw new Error("Duplicate id: can't add the same model to a collection twice");l[j]=h,k[i]=h}for(e=0;e<g;e++)(h=a[e]).on("all",this._onModelEvent,this),this._byCid[h.cid]=h,h.id&&(this._byId[h.id]=h);this.length+=g,f=b.at||this.models.length,this.models.splice.apply(this.models,[f,0].concat(a)),this.comparator&&this.sort({silent:!0});if(b.silent)return this;for(e=0,g=this.models.length;e<g;e++)h=this.models[e],k[h.cid]&&(b.index=e,h.trigger("add",h,this,b));return this},remove:function(a,b){var d,e,f,g;b=b||{},a=c.isArray(a)?a.slice():[a];for(d=0,e=a.length;d<e;d++){g=this.getByCid(a[d])||this.get(a[d]);if(!g)continue;delete this._byId[g.id],delete this._byCid[g.cid],f=this.indexOf(g),this.models.splice(f,1),this.length--,b.silent||(b.index=f,g.trigger("remove",g,this,b)),this._removeReference(g)}return this},get:function(a){return a&&this._byId[a.id||a]},getByCid:function(a){return a&&this._byCid[a.cid||a]},at:function(a){return this.models[a]},sort:function(a){a=a||{};if(!this.comparator)throw new Error("Cannot sort a set without a comparator");var b=c.bind(this.comparator,this);return this.comparator.length===1?this.models=this.sortBy(b):this.models.sort(b),a.silent||this.trigger("reset",this,a),this},pluck:function(a){return c.map(this.models,function(b){return b.get(a)})},reset:function(a,b){var d=this;return a=a||[],b=b||{},c.each(this.models,function(a){d._removeReference(a)}),this._reset(),this.add(a,{silent:!0,parse:b.parse}),b.silent||this.trigger("reset",this,b),this},fetch:function(a){a=a?c.clone(a):{},a.parse===undefined&&(a.parse=!0);var d=this,e=a.success;a.success=function(b,c){a.add?d.add(b,a):d.reset(b,a),e&&e(d,c)},a.error=b.Object._wrapError(a.error,d,a);var f=this.query||new b.Query(this.model);f.find(a)},create:function(a,b){var d=this;b=b?c.clone(b):{},a=this._prepareModel(a,b);if(!a)return!1;b.wait||d.add(a,b);var e=b.success;return b.success=function(c,f,g){b.wait&&d.add(c,b),e?e(c,f):c.trigger("sync",a,f,b)},a.save(null,b),a},parse:function(a,b){return a},chain:function(){return c(this.models).chain()},_reset:function(a){this.length=0,this.models=[],this._byId={},this._byCid={}},_prepareModel:function(a,c){if(a instanceof b.Object)a.collection||(a.collection=this);else{var d=a;c.collection=this,a=new this.model(d,c),a._validate(a.attributes,c)||(a=!1)}return a},_removeReference:function(a){this===a.collection&&delete a.collection,a.off("all",this._onModelEvent,this)},_onModelEvent:function(a,b,c,d){if(a!=="add"&&a!=="remove"||c===this)a==="destroy"&&this.remove(b,d),b&&a==="change:objectId"&&(delete this._byId[b.previous("objectId")],this._byId[b.id]=b),this.trigger.apply(this,arguments);else return}});var e=["forEach","each","map","reduce","reduceRight","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","sortBy","sortedIndex","toArray","size","first","initial","rest","last","without","indexOf","shuffle","lastIndexOf","isEmpty","groupBy"];c.each(e,function(a){b.Collection.prototype[a]=function(){return c[a].apply(c,[this.models].concat(c.toArray(arguments)))}}),b.Collection.extend=b._extend}(this),function(a){a.Parse=a.Parse||{};var b=a.Parse,c=b._;b.View=function(a){this.cid=c.uniqueId("view"),this._configure(a||{}),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()};var d=/^(\S+)\s*(.*)$/,e=["model","collection","el","id","attributes","className","tagName"];c.extend(b.View.prototype,b.Events,{tagName:"div",$:function(a){return this.$el.find(a)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this},make:function(a,c,d){var e=document.createElement(a);return c&&b.$(e).attr(c),d&&b.$(e).html(d),e},setElement:function(a,c){return this.$el=b.$(a),this.el=this.$el[0],c!==!1&&this.delegateEvents(),this},delegateEvents:function(a){a=a||b._getValue(this,"events");if(!a)return;this.undelegateEvents();var e=this;c.each(a,function(b,f){c.isFunction(b)||(b=e[a[f]]);if(!b)throw new Error('Event "'+a[f]+'" does not exist');var g=f.match(d),h=g[1],i=g[2];b=c.bind(b,e),h+=".delegateEvents"+e.cid,i===""?e.$el.bind(h,b):e.$el.delegate(i,h,b)})},undelegateEvents:function(){this.$el.unbind(".delegateEvents"+this.cid)},_configure:function(a){this.options&&(a=c.extend({},this.options,a));var b=this;c.each(e,function(c){a[c]&&(b[c]=a[c])}),this.options=a},_ensureElement:function(){if(!this.el){var a=b._getValue(this,"attributes")||{};this.id&&(a.id=this.id),this.className&&(a["class"]=this.className),this.setElement(this.make(this.tagName,a),!1)}else this.setElement(this.el,!1)}}),b.View.extend=b._extend}(this),function(a){a.Parse=a.Parse||{};var b=a.Parse,c=b._;b.User=b.Object.extend("_User",{_isCurrentUser:!1,_mergeMagicFields:function(a){a.sessionToken&&(this._sessionToken=a.sessionToken,delete a.sessionToken),b.User.__super__._mergeMagicFields.call(this,a)},signUp:function(a,d){var e,f=a&&a.username||this.get("username");if(!f||f==="")return d&&d.error&&(e=new b.Error(b.Error.OTHER_CAUSE,"Cannot sign up user with an empty name."),d.error(this,e)),!1;var g=a&&a.password||this.get("password");if(!g||g==="")return d&&d.error&&(e=new b.Error(b.Error.OTHER_CAUSE,"Cannot sign up user with an empty password."),d.error(this,e)),!1;var h=c.clone(d);return h.success=function(a){a.unset("password");var c=a._dirty;delete c.password,b.User._saveCurrentUser(a),d.success&&d.success.apply(this,arguments)},this.save(a,h)},logIn:function(a){var d=this,e=c.clone(a);e.success=function(c,f,g){var h=d.parse(c,g);if(!d.set(h,e))return!1;d.unset("password"),d._refreshCache(),d._dirty={},b.User._saveCurrentUser(d),a.success?a.success(d,c):d.trigger("sync",d,c,e)},e.error=b.Object._wrapError(a.error,d,e),b._request("login",null,null,"GET",this.toJSON(),e)},isCurrent:function(){return this._isCurrentUser},getUsername:function(){return this.get("username")},setUsername:function(a,b){return this.set("username",a,b)},setPassword:function(a,b){return this.set("password",a,b)},getEmail:function(){return this.get("email")},setEmail:function(a,b){return this.set("email",a,b)}},{_currentUser:null,_currentUserMatchesDisk:!1,_CURRENT_USER_KEY:"currentUser",signUp:function(a,c,d,e){d=d||{},d.username=a,d.password=c;var f=new b.User;return f.signUp(d,e)},logIn:function(a,c,d){var e=new b.User;e.set("username",a),e.set("password",c),e.logIn(d)},logOut:function(){b.User._currentUser!==null&&(b.User._currentUser._isCurrentUser=!1),b.User._currentUserMatchesDisk=!0,b.User._currentUser=null,localStorage.removeItem(b._getParsePath(b.User._CURRENT_USER_KEY))},requestPasswordReset:function(a,c){var d={email:a};c.error=b.Query._wrapError(c.error,c),b._request("requestPasswordReset",null,null,"POST",d,c)},current:function(){if(b.User._currentUser)return b.User._currentUser;if(b.User._currentUserMatchesDisk)return b.User._currentUser;b.User._currentUserMatchesDisk=!0;var a=localStorage.getItem(b._getParsePath(b.User._CURRENT_USER_KEY));if(!a)return null;b.User._currentUser=new b.User,b.User._currentUser._isCurrentUser=!0;var c=JSON.parse(a);return b.User._currentUser.id=c._id,delete c._id,b.User._currentUser._sessionToken=c._sessionToken,delete c._sessionToken,b.User._currentUser.set(c),b.User._currentUser._refreshCache(),b.User._currentUser._dirty={},b.User._currentUser},_saveCurrentUser:function(a){b.User._currentUser!==a&&b.User.logOut(),a._isCurrentUser=!0,b.User._currentUser=a,b.User._currentUserMatchesDisk=!0;var c=a.toJSON();c._id=a.id,c._sessionToken=a._sessionToken,localStorage.setItem(b._getParsePath(b.User._CURRENT_USER_KEY),JSON.stringify(c))}})}(this),function(a){a.Parse=a.Parse||{};var b=a.Parse,c=b._;b.Query=function(a){c.isString(a)&&(a=b.Object._getSubclass(a)),this.objectClass=a,this.className=a.prototype.className,this._where={},this._include=[],this._limit=-1,this._skip=0},b.Query.prototype={get:function(a,b){var c=new this.objectClass({objectId:a});c.fetch(b)},toJSON:function(){var a={where:this._where};return this._include.length>0&&(a.include=this._include.join(",")),this._limit>=0&&(a.limit=this._limit),this._skip>0&&(a.skip=this._skip),this._order!==undefined&&(a.order=this._order),a},find:function(a){var d=this,e=a.success,f={error:a.error,success:function(a){e(c.map(a.results,function(a){var b=new d.objectClass(a);return b._refreshCache(),b._dirty={},b}))}},g=this.toJSON();f.error=b.Query._wrapError(a.error,f),b._request("classes",this.className,null,"GET",g,f)},count:function(a){var c=this,d=a.success,e={error:a.error,success:function(a){d(a.count)}},f=this.toJSON();f.limit=0,f.count=1,e.error=b.Query._wrapError(a.error,e),b._request("classes",this.className,null,"GET",f,e)},first:function(a){var d=this,e=a.success,f={error:a.error,success:function(a){e(c.map(a.results,function(a){var b=new d.objectClass(a);return b._refreshCache(),b._dirty={},b})[0])}},g=this.toJSON();g.limit=1,f.error=b.Query._wrapError(a.error,f),b._request("classes",this.className,null,"GET",g,f)},collection:function(a,d){return d=d||{},new b.Collection(a,c.extend(d,{model:this.objectClass,query:this}))},skip:function(a){return this._skip=a,this},limit:function(a){return this._limit=a,this},equalTo:function(a,c){return this._where[a]=b._encode(c),this},_addCondition:function(a,c,d){return this._where[a]||(this._where[a]={}),this._where[a][c]=b._encode(d),this},notEqualTo:function(a,b){return this._addCondition(a,"$ne",b),this},lessThan:function(a,b){return this._addCondition(a,"$lt",b),this},greaterThan:function(a,b){return this._addCondition(a,"$gt",b),this},lessThanOrEqualTo:function(a,b){return this._addCondition(a,"$lte",b),this},greaterThanOrEqualTo:function(a,b){return this._addCondition(a,"$gte",b),this},containedIn:function(a,b){return this._addCondition(a,"$in",b),this},exists:function(a){return this._addCondition(a,"$exists",!0),this},doesNotExist:function(a){return this._addCondition(a,"$exists",!1),this},matches:function(a,b,c){return this._addCondition(a,"$regex",b),c||(c=""),b.ignoreCase&&(c+="i"),b.multiline&&(c+="m"),c&&c.length&&this._addCondition(a,"$options",c),this},_quote:function(a){return"\\Q"+a.replace("\\E","\\E\\\\E\\Q")+"\\E"},contains:function(a,b){return this._addCondition(a,"$regex",this._quote(b)),this},startsWith:function(a,b){return this._addCondition(a,"$regex","^"+this._quote(b)),this},endsWith:function(a,b){return this._addCondition(a,"$regex",this._quote(b)+"$"),this},ascending:function(a){return this._order=a,this},descending:function(a){return this._order="-"+a,this},near:function(a,c){return c instanceof b.GeoPoint||(c=new b.GeoPoint(c)),this._addCondition(a,"$nearSphere",c),this},withinRadians:function(a,b,c){return this.near(a,b),this._addCondition(a,"$maxDistance",c),this},withinMiles:function(a,b,c){return this.withinRadians(a,b,c/3958.8)},withinKilometers:function(a,b,c){return this.withinRadians(a,b,c/6371)},include:function(a){return c.isArray(a)?this._include=this._include.concat(a):this._include.push(a),this}},b.Query._wrapError=function(a,c){return function(d){if(a){var e=new b.Error(-1,d.responseText);if(d.responseText){var f=JSON.parse(d.responseText);f&&(e=new b.Error(f.code,f.error))}a(e,c)}}}}(this);